# Buon Ma Thuot Diocese Management System (GPBMT.ORG) Architecture Document

## Table of Contents

- [Buon Ma Thuot Diocese Management System (GPBMT.ORG) Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [High Level Overview](./high-level-architecture.md#high-level-overview)
    - [High Level Project Diagram](./high-level-architecture.md#high-level-project-diagram)
    - [Architectural and Design Patterns](./high-level-architecture.md#architectural-and-design-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Cloud Infrastructure](./tech-stack.md#cloud-infrastructure)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
  - [Data Models](./data-models.md)
    - [User](./data-models.md#user)
    - [Role](./data-models.md#role)
    - [Parish](./data-models.md#parish)
    - [Parishioner](./data-models.md#parishioner)
    - [Fund](./data-models.md#fund)
    - [Category](./data-models.md#category)
    - [BankAccount](./data-models.md#bankaccount)
    - [Entity](./data-models.md#entity)
    - [Transaction](./data-models.md#transaction)
    - [Employee](./data-models.md#employee)
    - [Contract](./data-models.md#contract)
    - [Payroll](./data-models.md#payroll)
    - [PayrollItem](./data-models.md#payrollitem)
    - [Asset](./data-models.md#asset)
    - [RentalContract](./data-models.md#rentalcontract)
    - [RentalPayment](./data-models.md#rentalpayment)
    - [AuditLog](./data-models.md#auditlog)
    - [TypeScript Interfaces](./data-models.md#typescript-interfaces)
  - [Components](./components.md)
    - [API Layer (Next.js API Routes)](./components.md#api-layer-nextjs-api-routes)
    - [Backend Validation Middleware](./components.md#backend-validation-middleware)
    - [Auth Middleware](./components.md#auth-middleware)
    - [RBAC Middleware](./components.md#rbac-middleware)
    - [Service Layer](./components.md#service-layer)
    - [Mongoose Models](./components.md#mongoose-models)
    - [React Query Hooks (Domain-Based)](./components.md#react-query-hooks-domain-based)
    - [UI Components (shadcn/ui)](./components.md#ui-components-shadcnui)
    - [GenericForm Wrapper](./components.md#genericform-wrapper)
    - [GenericTable Wrapper](./components.md#generictable-wrapper)
    - [Feature Components](./components.md#feature-components)
    - [Component Diagrams](./components.md#component-diagrams)
    - [React Query Implementation Patterns](./components.md#react-query-implementation-patterns)
      - [Centralized Query Keys (queries/keys.ts)](./components.md#centralized-query-keys-querieskeysts)
      - [Generic Query Hook Pattern (queries/transactions/queries.ts)](./components.md#generic-query-hook-pattern-queriestransactionsqueriests)
      - [Generic Mutation Hook Pattern with Callbacks (queries/transactions/mutations.ts)](./components.md#generic-mutation-hook-pattern-with-callbacks-queriestransactionsmutationsts)
  - [External APIs](./external-apis.md)
    - [Cloudinary API](./external-apis.md#cloudinary-api)
    - [MongoDB Atlas API](./external-apis.md#mongodb-atlas-api)
  - [Core Workflows](./core-workflows.md)
    - [Transaction Creation and Approval](./core-workflows.md#transaction-creation-and-approval)
    - [Payroll Generation and Transaction Creation](./core-workflows.md#payroll-generation-and-transaction-creation)
  - [REST API Spec](./rest-api-spec.md)
    - [API Style](./rest-api-spec.md#api-style)
    - [Base URL](./rest-api-spec.md#base-url)
    - [Authentication](./rest-api-spec.md#authentication)
    - [Common Response Format](./rest-api-spec.md#common-response-format)
    - [Endpoints](./rest-api-spec.md#endpoints)
      - [Auth](./rest-api-spec.md#auth)
      - [Users](./rest-api-spec.md#users)
      - [Parishes](./rest-api-spec.md#parishes)
      - [Parishioners](./rest-api-spec.md#parishioners)
      - [Funds](./rest-api-spec.md#funds)
      - [Categories](./rest-api-spec.md#categories)
      - [Bank Accounts](./rest-api-spec.md#bank-accounts)
      - [Entities](./rest-api-spec.md#entities)
      - [Transactions](./rest-api-spec.md#transactions)
      - [Employees](./rest-api-spec.md#employees)
      - [Contracts](./rest-api-spec.md#contracts)
      - [Payrolls](./rest-api-spec.md#payrolls)
      - [Assets](./rest-api-spec.md#assets)
      - [Rental Contracts](./rest-api-spec.md#rental-contracts)
      - [Audit Logs](./rest-api-spec.md#audit-logs)
      - [Dashboard](./rest-api-spec.md#dashboard)
  - [Database Schema](./database-schema.md)
    - [Collections Overview](./database-schema.md#collections-overview)
      - [users](./database-schema.md#users)
      - [transactions](./database-schema.md#transactions)
    - [Indexes](./database-schema.md#indexes)
    - [Entity Relationship Diagram](./database-schema.md#entity-relationship-diagram)
  - [Source Tree](./source-tree.md)
  - [Infrastructure and Deployment](./infrastructure-and-deployment.md)
    - [Infrastructure as Code](./infrastructure-and-deployment.md#infrastructure-as-code)
    - [Deployment Strategy](./infrastructure-and-deployment.md#deployment-strategy)
    - [Environments](./infrastructure-and-deployment.md#environments)
    - [Environment Promotion Flow](./infrastructure-and-deployment.md#environment-promotion-flow)
    - [Rollback Strategy](./infrastructure-and-deployment.md#rollback-strategy)
    - [Environment Variables](./infrastructure-and-deployment.md#environment-variables)
  - [Error Handling Strategy](./error-handling-strategy.md)
    - [General Approach](./error-handling-strategy.md#general-approach)
    - [Logging Standards](./error-handling-strategy.md#logging-standards)
    - [Error Handling Patterns](./error-handling-strategy.md#error-handling-patterns)
      - [API Route Errors](./error-handling-strategy.md#api-route-errors)
      - [External API Errors (Cloudinary)](./error-handling-strategy.md#external-api-errors-cloudinary)
      - [Business Logic Errors](./error-handling-strategy.md#business-logic-errors)
  - [Coding Standards](./coding-standards.md)
    - [Core Standards](./coding-standards.md#core-standards)
    - [Naming Conventions](./coding-standards.md#naming-conventions)
    - [Critical Rules](./coding-standards.md#critical-rules)
  - [Test Strategy and Standards](./test-strategy-and-standards.md)
    - [Testing Philosophy](./test-strategy-and-standards.md#testing-philosophy)
    - [Test Types and Organization](./test-strategy-and-standards.md#test-types-and-organization)
      - [Unit Tests](./test-strategy-and-standards.md#unit-tests)
      - [Integration Tests](./test-strategy-and-standards.md#integration-tests)
    - [Test Data Management](./test-strategy-and-standards.md#test-data-management)
    - [Key Test Scenarios](./test-strategy-and-standards.md#key-test-scenarios)
  - [Security](./security.md)
    - [Input Validation](./security.md#input-validation)
    - [Authentication & Authorization](./security.md#authentication-authorization)
    - [RBAC Permissions Matrix](./security.md#rbac-permissions-matrix)
    - [Secrets Management](./security.md#secrets-management)
    - [API Security](./security.md#api-security)
    - [Data Protection](./security.md#data-protection)
  - [Checklist Results Report](./checklist-results-report.md)
  - [Next Steps](./next-steps.md)
    - [Development](./next-steps.md#development)
